/*! 最终版权归**所有 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{237:function(t,e){},286:function(t,e,a){"use strict";a.r(e),(i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"excavator-management"},[a("header",{staticClass:"title"},[t._v("车辆管理-钩机")]),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.searchForm,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"钩机编号：钩-"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入钩机编号"},model:{value:t.searchForm.excavatorNumber,callback:function(e){t.$set(t.searchForm,"excavatorNumber",e)},expression:"searchForm.excavatorNumber"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"归属单位:"}},[a("el-select",{attrs:{size:"small",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择归属单位"},model:{value:t.searchForm.attributionUnit,callback:function(e){t.$set(t.searchForm,"attributionUnit",e)},expression:"searchForm.attributionUnit"}},[a("el-option",{attrs:{label:"自有",value:"自有"}}),t._v(" "),a("el-option",{attrs:{label:"租赁",value:"租赁"}})],1)],1)],1),t._v(" "),a("el-col",{staticClass:"boundary",attrs:{span:6}},[a("el-button",{staticClass:"search",attrs:{type:"warning",size:"small"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"reset",attrs:{type:"primary",size:"small"},on:{click:t.reset}},[t._v("重置")])],1)],1)],1),t._v(" "),a("el-divider"),t._v(" "),a("el-row",{staticClass:"boundary"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addCar}},[t._v("新增")])],1),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-style":{textAlign:"center",background:"#FAFAFA"},"cell-style":t.changeColor,stripe:""}},[a("el-table-column",{attrs:{type:"index",index:t.count,label:"序号",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"excavatorNumber",label:"钩机编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attributionUnit",label:"归属单位"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return t.clickEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return t.clickDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"center-style"},[a("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogFormVisible,center:""},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.dialogForm}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"钩机编号：钩-","label-width":t.formLabelWidth}},[a("el-input",{attrs:{size:"small",autocomplete:"off",placeholder:"请输入钩机号"},on:{blur:t.checkDialogExcavatornumber},model:{value:t.dialogForm.excavatorNumber,callback:function(e){t.$set(t.dialogForm,"excavatorNumber",e)},expression:"dialogForm.excavatorNumber"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"归属单位:","label-width":t.formLabelWidth}},[a("el-select",{attrs:{size:"small",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择归属单位"},on:{blur:t.checkDialogAttributionUnit},model:{value:t.dialogForm.attributionUnit,callback:function(e){t.$set(t.dialogForm,"attributionUnit",e)},expression:"dialogForm.attributionUnit"}},[a("el-option",{attrs:{label:"自有",value:"自有"}}),t._v(" "),a("el-option",{attrs:{label:"租赁",value:"租赁"}})],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.dialogCancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.dialogConfirm}},[t._v("确 定")])],1)],1)],1)})._withStripped=!0;var i,o=a(236),l=a.n(o);o={name:"ExcavatorManagement",data:function(){return{tableData:[],searchForm:{excavatorNumber:"",attributionUnit:""},dialogTitle:"新增一条数据",dialogFormVisible:!1,dialogForm:{excavatorNumber:"",attributionUnit:""},formLabelWidth:"120px",oldExcavatorNumber:"",pageIndex:1,total:20,pageSize:10}},methods:{checkDialogExcavatornumber:function(){console.log("验证钩机编号")},checkDialogAttributionUnit:function(){console.log("归属单位")},search:function(){var t=this;console.log("搜索"),this.axios.get("/excavator/getAllExcavator?excavatorNumber="+this.searchForm.excavatorNumber+"&attributionUnit="+this.searchForm.attributionUnit).then((function(e){console.log(e),t.tableData=e.data.body.truckList,t.total=e.data.body.total}))},reset:function(){console.log("重置"),this.searchForm.excavatorNumber="",this.searchForm.attributionUnit=""},clickEdit:function(t,e){this.dialogTitle="编辑",this.dialogFormVisible=!0;var a=e.excavatorNumber.length;a=e.excavatorNumber.substring(1,a);console.log(a),this.dialogForm.excavatorNumber=a,this.dialogForm.attributionUnit=e.attributionUnit,this.dialogForm.dialogId=e.id,this.oldExcavatorNumber=e.excavatorNumber},clickDelete:function(t,e){var a=this,i={id:e.id};this.$confirm("此操作将永久该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.axios.post("/excavator/deleteExcavator",l.a.stringify(i)).then((function(t){console.log(t),"删除成功"==t.data.msg&&(a.$message({type:"success",message:"删除成功!"}),a.findAll())}))})).catch((function(){a.$message({type:"info",message:"已取消删除！"})}))},addCar:function(){console.log("新增一条数据"),this.dialogForm.excavatorNumber="",this.dialogForm.attributionUnit="",this.dialogTitle="新增一条数据",this.dialogFormVisible=!0},dialogCancel:function(){console.log("点击了对话框的取消按钮"),this.dialogFormVisible=!1},dialogConfirm:function(){var t,e,a=this;console.log("点击了对话框的确认按钮"),"新增一条数据"==this.dialogTitle?this.dialogForm.excavatorNumber&&this.dialogForm.attributionUnit?(t="excavatorNumber=钩"+this.dialogForm.excavatorNumber+"&attributionUnit="+this.dialogForm.attributionUnit,this.axios.post("/excavator/addExcavator",t).then((function(t){console.log(t),"添加成功"==t.data.msg?(a.$notify({title:"提示",message:"添加成功！",type:"success"}),a.dialogFormVisible=!1,a.findAll()):"此挖掘机已存在"==t.data.msg&&a.$notify({title:"提示",message:"此挖掘机已存在！",type:"warning"})}))):this.$notify({title:"提示",message:"输入框内容不能为空",type:"warning"}):"编辑"==this.dialogTitle&&(this.dialogForm.excavatorNumber&&this.dialogForm.attributionUnit?(t="钩"+this.dialogForm.excavatorNumber,this.oldExcavatorNumber!==t?(e={excavatorNumber:t,attributionUnit:this.dialogForm.attributionUnit,id:this.dialogForm.dialogId},this.axios.post("/excavator/updateExcavator",l.a.stringify(e)).then((function(t){console.log(t),"编号已存在"==t.data.msg?a.$notify({title:"提示",message:"该编号已存在！",type:"warning"}):"修改成功"==t.data.msg&&(a.$notify({title:"提示",message:"修改成功！",type:"success"}),a.dialogFormVisible=!1,a.findAll())}))):(e={attributionUnit:this.dialogForm.attributionUnit,id:this.dialogForm.dialogId},this.axios.post("/excavator/updateExcavator",l.a.stringify(e)).then((function(t){console.log(t),200==t.status&&(a.$notify({title:"提示",message:"修改成功！",type:"success"}),a.dialogFormVisible=!1,a.findAll())})))):this.$notify({title:"提示",message:"输入框内容不能为空",type:"warning"}))},handleSizeChange:function(t){this.pageSize=t,this.findAll()},handleCurrentChange:function(t){this.pageIndex=t,this.findAll()},findAll:function(){var t=this;this.axios.get("/excavator/getAllExcavator?pageSize="+this.pageSize+"&pageIndex="+this.pageIndex).then((function(e){t.tableData=e.data.body.truckList,t.total=e.data.body.total,console.log(e)}))},changeColor:function(t){return t.row,t.column,t.rowIndex,t.columnIndex,"textAlign:center"},count:function(t){return(this.pageIndex-1)*this.pageSize+t+1}},mounted:function(){this.findAll()}},a=a(79);(i=Object(a.a)(o,i,[],!1,null,"6023ad00",null)).options.__file="src/components/content/operateManagement/ExcavatorManagement.vue",e.default=i.exports}}]);