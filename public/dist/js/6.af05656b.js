/*! 最终版权归**所有 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{247:function(t,e){},268:function(t,e,i){var n=i(82),o=i(330);i={insert:"head",singleton:!1};n(o="string"==typeof(o=o.__esModule?o.default:o)?[[t.i,o,""]]:o,i),t.exports=o.locals||{}},269:function(t,e,i){var n=i(82),o=i(332);i={insert:"head",singleton:!1};n(o="string"==typeof(o=o.__esModule?o.default:o)?[[t.i,o,""]]:o,i),t.exports=o.locals||{}},329:function(t,e,i){"use strict";i(268)},330:function(t,e,i){"use strict";i.r(e);var n=i(27);(n=i.n(n)()(!1)).push([t.i,"\n.home[data-v-add16e0a] {\r\n  /* width: 1200px; */\r\n  margin: auto;\r\n  position: relative;\n}\n.btn[data-v-add16e0a] {\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n  padding: 5px 10px;\r\n  cursor: pointer;\n}\nh3[data-v-add16e0a] {\r\n  margin: 30px 0 15px;\n}\n.preview[data-v-add16e0a] {\r\n  width: 100%;\n}\r\n",""]),e.default=n},331:function(t,e,i){"use strict";i(269)},332:function(t,e,i){"use strict";i.r(e);var n=i(27);(n=i.n(n)()(!1)).push([t.i,"\n.learning-infomation[data-v-3a16b099] {\r\n  box-sizing: border-box;\r\n  padding: 10px;\n}\n.title[data-v-3a16b099] {\r\n  font-size: 20px;\r\n  font-weight: 700;\r\n  color: #333;\r\n  line-height: 50px;\n}\r\n\r\n/* 按钮边界 */\n.boundary[data-v-3a16b099] {\r\n  padding-left: 20px;\r\n  padding-top: 5px;\n}\r\n\r\n/* 搜索错误提示 */\n.err-text-box[data-v-3a16b099] {\r\n  height: 20px;\r\n\r\n  box-sizing: border-box;\r\n  padding-left: 100px;\r\n  color: red;\r\n  font-size: 14px;\n}\n.table[data-v-3a16b099] {\r\n  margin-top: 20px;\n}\r\n\r\n/* 分页样式 */\n.center-style[data-v-3a16b099] {\r\n  text-align: right;\n}\r\n",""]),e.default=n},339:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"learning-infomation"},[i("header",{staticClass:"title"},[t._v("资讯管理")]),t._v(" "),i("el-divider"),t._v(" "),i("el-row",{ref:"test",staticClass:"boundary"},[i("el-button",{staticStyle:{"margin-left":"16px"},attrs:{size:"small",type:"primary"},on:{click:t.newAdd}},[t._v("\n      新增\n    ")])],1),t._v(" "),i("div",{staticClass:"table"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-style":{textAlign:"center",background:"#FAFAFA"},"cell-style":t.changeColor,stripe:""}},[i("el-table-column",{attrs:{type:"index",index:t.count,label:"序号",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"newsTitle",label:"标题"}}),t._v(" "),i("el-table-column",{attrs:{prop:"createDate",label:"创建日期"}}),t._v(" "),i("el-table-column",{attrs:{prop:"newsAuthor",label:"创建人"}}),t._v(" "),i("el-table-column",{attrs:{label:"是否发布"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{on:{change:function(i){return t.switchPublish(e.$index,e.row)}},model:{value:e.row.isPublish,callback:function(i){t.$set(e.row,"isPublish",i)},expression:"scope.row.isPublish"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(i){return t.clickEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-delete"},on:{click:function(i){return t.clickDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),i("div",{staticClass:"center-style"},[i("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogFormVisible,center:""},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{attrs:{model:t.form}},[i("el-form-item",{attrs:{label:"标题:","label-width":t.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off",type:"text",placeholder:"请输入标题",maxlength:"40","show-word-limit":""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"创建人:","label-width":t.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off",type:"text",placeholder:"请输入创建人",maxlength:"40","show-word-limit":""},model:{value:t.form.author,callback:function(e){t.$set(t.form,"author",e)},expression:"form.author"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"封面:","label-width":t.formLabelWidth}},[i("el-upload",{attrs:{action:"http://192.168.124.12:8080/news/imageUpload","list-type":"picture-card","file-list":t.fileList,limit:1,"before-upload":t.handleUploadFileType,"on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"on-success":t.handleSuccess}},[i("i",{staticClass:"el-icon-plus"})]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible,"modal-append-to-body":!1,"append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),t._v(" "),i("wang-editor",{attrs:{content:t.content}})],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.clickCancel}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.clickConfirm}},[t._v("确 定")])],1)],1)],1)};n._withStripped=!0,i(266),i(320);var o=i(246),a=i.n(o);(l=function(){var t=this.$createElement;return(t=this._self._c||t)("div",{staticClass:"home"},[t("el-form-item",{attrs:{label:"内容:","label-width":this.formLabelWidth}},[t("div",{ref:"box"})])],1)})._withStripped=!0;var l,s=i(327),r=i(328),c=i.n(r);o={name:"WangEditor",data:function(){return Object(s.a)({editor:null,editorData:"",formLabelWidth:"60px",imgSrc:""},"editor","")},props:{content:{type:String,default:""}},mounted:function(){var t=this,e=this.$refs.box;(e=new c.a(e)).config.uploadImgServer="http://192.168.124.12:8080/news/imageUpload",e.config.uploadFileName="file",e.config.debug=!0,e.config.uploadImgHooks={fail:function(t,e,i){console.log(i)},success:function(t,e,i){console.log(i)},customInsert:function(t,e){t(e.body.data[0]),console.log(e.body.data[0])}},e.config.onchange=function(e){t.editorData=e},e.config.height=500,e.config.zIndex=99,e.create(),this.editor=e,this.$bus.$on("sendHtml",(function(){console.log("接收到请求"),t.$bus.$emit("getHtml",t.editorData)})),e.txt.html(this.content),this.editor=e},watch:{content:function(t,e){this.editor.txt.html(t)}},methods:{getEditorData:function(){var t=this.editor.txt.html();alert(t)}},beforeDestroy:function(){this.editor.destroy(),this.editor=null}},i(329),r=i(81);(l=Object(r.a)(o,l,[],!1,null,"add16e0a",null)).options.__file="src/components/common/wangEditor/WangEditor.vue",l={name:"LearningInfomation",data:function(){return{tableData:[],dialogTableVisible:!1,dialogFormVisible:!1,dialogTitle:"",form:{title:"",author:"",imageSrc:"",html:""},formLabelWidth:"60px",dialogImageUrl:"",dialogVisible:!1,fileList:[],pageIndex:1,total:10,pageSize:10,content:""}},components:{WangEditor:l.exports},methods:{newAdd:function(){this.form.title="",this.form.author="",this.form.html="",this.fileList=[],this.content="",console.log("新增"),this.dialogFormVisible=!0,this.dialogTitle="新增一条资讯"},clickEdit:function(t,e){console.log("编辑"),this.dialogTitle="编辑资讯",console.log(e),this.form.title=e.newsTitle,this.form.author=e.newsAuthor,this.form.id=e.id;var i={name:"图片名称如avator.png",url:e.newsCover};this.fileList=[i],console.log(this.fileList),this.content=e.newsContent,this.dialogFormVisible=!0},clickDelete:function(t,e){var i=this;console.log("删除"),this.$confirm("此操作将永久该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={id:e.id};i.axios.post("/news/deleteNews",a.a.stringify(t)).then((function(t){"删除成功"==t.data.msg&&(i.$message({type:"success",message:"删除成功!"}),i.findAll())}))})).catch((function(){i.$message({type:"info",message:"已取消删除！"})}))},changeColor:function(t){return t.row,t.column,t.rowIndex,6==(t=t.columnIndex)||7==t?"textAlign:center;cursor: pointer;":"textAlign:center;"},switchPublish:function(t,e){console.log(e.id+"是否发布"+e.isPublish),e.id,e.isPublish},clickConfirm:function(){var t=this;console.log("点击了对话框的确认"),this.$bus.$emit("sendHtml");var e,i,n=this.form.html.split(" "),o=[];for(e in n)-1!==n[e].indexOf("src=")&&(i=n[e].length-1,i=n[e].substring(5,i),o.push(i));o.push(this.form.imageSrc);var l={newsTitle:this.form.title,newsCover:this.form.imageSrc,newsContent:this.form.html,newsAuthor:this.form.author};"新增一条资讯"==this.dialogTitle?(console.log(a.a.stringify(l)+"&imageArray="+o),this.axios.post("/news/createNews",a.a.stringify(l)+"&imageArray="+o).then((function(e){console.log(e),"操作成功"==e.data.msg?(t.$notify({title:"提示",message:"新增资讯成功！",type:"success"}),t.findAll(),t.dialogFormVisible=!1):t.$notify.error({title:"提示",message:"新增资讯失败！"})}))):"编辑资讯"==this.dialogTitle&&(console.log(a.a.stringify(l)+"&id="+this.form.id),this.axios.post("/news/updateNews",a.a.stringify(l)+"&id="+this.form.id).then((function(e){"修改成功"==e.data.msg?(t.$notify({title:"提示",message:"修改成功！",type:"success"}),t.findAll(),t.dialogFormVisible=!1):t.$notify.error({title:"提示",message:"修改失败！"})})))},clickCancel:function(){console.log("点击了对话框的取消"),this.dialogFormVisible=!1},handleRemove:function(t,e){var i=this;console.log("删除成功");var n={filePath:this.form.imageSrc};console.log(a.a.stringify(n)),this.axios.post("/news/deleteFile",a.a.stringify(n)).then((function(t){console.log(t),200==t.status&&i.$message({message:"删除成功！",type:"success"})}))},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleUploadFileType:function(t){var e="image/jpeg"===t.type,i="image/jpg"===t.type,n="image/png"===t.type;t="image/gif"===t.type;return e||i||n||t||this.$message.error("上传头像图片只能是JPEG、JPG、PNG、GIF格式!"),e||i||n||t},handleSuccess:function(t,e,i){console.log("图片上传成功"),console.log(e),this.form.imageSrc=e.response.body.data[0]},handleSizeChange:function(){},handleCurrentChange:function(){},count:function(t){return(this.pageIndex-1)*this.pageSize+t+1},findAll:function(){var t=this;this.axios.get("/news/getNews?pageSize="+this.pageSize+"&pageIndex="+this.pageIndex).then((function(e){t.tableData=e.data.body.projectList,t.total=e.data.body.total,console.log(e),console.log("刷新页面成功")}))}},mounted:function(){var t=this;this.findAll(),this.$bus.$on("getHtml",(function(e){console.log("接收到数据"),t.form.html=e}))}},i(331),(n=Object(r.a)(l,n,[],!1,null,"3a16b099",null)).options.__file="src/components/content/learningInfomation/LearningInfomation.vue",e.default=n.exports}}]);