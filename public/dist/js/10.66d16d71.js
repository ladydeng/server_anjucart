/*! 最终版权归**所有 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{247:function(t,e){},263:function(t,e,i){var a=i(82),o=i(314);i={insert:"head",singleton:!1};a(o="string"==typeof(o=o.__esModule?o.default:o)?[[t.i,o,""]]:o,i),t.exports=o.locals||{}},313:function(t,e,i){"use strict";i(263)},314:function(t,e,i){"use strict";i.r(e);var a=i(27);(a=i.n(a)()(!1)).push([t.i,"\n.truck-management[data-v-002efa78] {\r\n  box-sizing: border-box;\r\n  padding: 10px;\n}\n.title[data-v-002efa78] {\r\n  font-size: 20px;\r\n  font-weight: 700;\r\n  color: #333;\r\n  line-height: 50px;\n}\r\n/* 按钮边界 */\n.boundary[data-v-002efa78] {\r\n  padding-left: 20px;\n}\n.search[data-v-002efa78] {\r\n  margin-top: 5px;\n}\n.table[data-v-002efa78] {\r\n  margin-top: 20px;\n}\r\n\r\n/* 分页样式 */\n.center-style[data-v-002efa78] {\r\n  text-align: right;\n}\r\n",""]),e.default=a},344:function(t,e,i){"use strict";i.r(e),(a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"truck-management"},[i("header",{staticClass:"title"},[t._v("车辆管理-货车")]),t._v(" "),i("el-form",{ref:"form",attrs:{model:t.searchForm,"label-width":"100px"}},[i("el-row",[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"车牌号:豫A-"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入车牌号后五位"},model:{value:t.searchForm.carNumber,callback:function(e){t.$set(t.searchForm,"carNumber",e)},expression:"searchForm.carNumber"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"归属单位:"}},[i("el-select",{attrs:{size:"small",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择归属单位"},model:{value:t.searchForm.attributionUnit,callback:function(e){t.$set(t.searchForm,"attributionUnit",e)},expression:"searchForm.attributionUnit"}},[i("el-option",{attrs:{label:"自有",value:"自有"}}),t._v(" "),i("el-option",{attrs:{label:"外挂",value:"外挂"}})],1)],1)],1),t._v(" "),i("el-col",{staticClass:"boundary",attrs:{span:6}},[i("el-button",{staticClass:"search",attrs:{type:"warning",size:"small"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),i("el-button",{staticClass:"reset",attrs:{type:"primary",size:"small"},on:{click:t.reset}},[t._v("重置")])],1)],1)],1),t._v(" "),i("el-divider"),t._v(" "),i("el-row",{staticClass:"boundary"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addTruck}},[t._v("新增")])],1),t._v(" "),i("div",{staticClass:"table"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-style":{textAlign:"center",background:"#FAFAFA"},"cell-style":t.changeColor,stripe:""}},[i("el-table-column",{attrs:{type:"index",index:t.count,label:"序号",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"carNumber",label:"车牌号"}}),t._v(" "),i("el-table-column",{attrs:{prop:"attributionUnit",label:"归属单位"}}),t._v(" "),i("el-table-column",{attrs:{prop:"capacity",label:"容量(m³)",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"createDate",label:"创建日期"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(i){return t.clickEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-delete"},on:{click:function(i){return t.clickDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),i("div",{staticClass:"center-style"},[i("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogFormVisible,center:"",width:"40%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{attrs:{model:t.dialogForm}},[i("el-form-item",{attrs:{label:"车牌号：豫A-","label-width":t.formLabelWidth}},[i("el-input",{staticClass:"dialog-input",attrs:{autocomplete:"off",placeholder:"请输入车牌号后五位"},on:{blur:t.checkDialogCarnumber},model:{value:t.dialogForm.carNumber,callback:function(e){t.$set(t.dialogForm,"carNumber",e)},expression:"dialogForm.carNumber"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"归属单位：","label-width":t.formLabelWidth}},[i("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择归属单位"},model:{value:t.dialogForm.attributionUnit,callback:function(e){t.$set(t.dialogForm,"attributionUnit",e)},expression:"dialogForm.attributionUnit"}},[i("el-option",{attrs:{label:"自有",value:"自有"}}),t._v(" "),i("el-option",{attrs:{label:"外挂",value:"外挂"}})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"容量：","label-width":t.formLabelWidth}},[i("el-input",{staticClass:"dialog-input",attrs:{autocomplete:"off",placeholder:"请输入容量"},on:{blur:t.checkDialogCapacity},model:{value:t.dialogForm.capacity,callback:function(e){t.$set(t.dialogForm,"capacity",e)},expression:"dialogForm.capacity"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.dialogCancel}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.dialogConfirm}},[t._v("确 定")])],1)],1)],1)})._withStripped=!0;var a,o=i(246),l=i.n(o),r=/^[0-9A-Za-z]{5}$/,n=/^[0-9]{1,2}$/;o={name:"TruckManagement",data:function(){return{tableData:[],searchForm:{carNumber:"",attributionUnit:""},dialogTitle:"新增一条数据",dialogFormVisible:!1,dialogForm:{carNumber:"",attributionUnit:"",capacity:""},testDialogCarNumber:!1,testDialogAttributionUnit:!1,testDialogCapacity:!1,formLabelWidth:"100px",oldCarNumber:"",pageIndex:1,total:20,pageSize:10}},methods:{checkDialogCarnumber:function(){r.test(this.dialogForm.carNumber)?this.testDialogCarNumber=!0:this.$message.error("请输入车牌号后五位！")},checkDialogAttributionUnit:function(){""!==this.dialogForm.attributionUnit?this.testDialogAttributionUnit=!0:this.$message.error("归属单位不能为空！")},checkDialogCapacity:function(){n.test(this.dialogForm.capacity)?this.testDialogCapacity=!0:this.$message.error("您输入的容量有误！")},search:function(){var t=this;console.log("搜索");var e=this.searchForm.carNumber.toUpperCase(),i=this.searchForm.attributionUnit;this.axios.get("/car/getAllTruck?carNumber="+e+"&attributionUnit="+i).then((function(e){console.log(e),t.tableData=e.data.body.truckList,t.total=e.data.body.total}))},reset:function(){console.log("重置"),this.searchForm.carNumber="",this.searchForm.attributionUnit="",this.searchForm.searchCapacity="",this.findAll()},clickEdit:function(t,e){this.dialogTitle="编辑",this.dialogFormVisible=!0;var i=e.carNumber.substring(2,9);console.log(i),this.dialogForm.carNumber=i,this.dialogForm.attributionUnit=e.attributionUnit,this.dialogForm.capacity=e.capacity,this.dialogForm.dialogId=e.id,this.oldCarNumber=i},clickDelete:function(t,e){var i=this,a={id:e.id};this.$confirm("此操作将永久该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.axios.post("/car/deleteTruck",l.a.stringify(a)).then((function(t){"删除成功"==t.data.msg&&(i.$message({type:"success",message:"删除成功!"}),i.findAll())}))})).catch((function(){i.$message({type:"info",message:"已取消删除！"})})),console.log(l.a.stringify(a))},addTruck:function(){console.log("新增一条数据"),this.dialogForm.carNumber="",this.dialogForm.attributionUnit="",this.dialogForm.capacity="",this.dialogTitle="新增一条数据",this.dialogFormVisible=!0},dialogCancel:function(){console.log("点击了对话框的取消按钮"),this.dialogFormVisible=!1},dialogConfirm:function(){var t=this;this.checkDialogCarnumber(),this.checkDialogAttributionUnit(),this.checkDialogCapacity(),console.log(this.testDialogCarNumber,this.testDialogAttributionUnit,this.testDialogCapacity);var e={carNumber:this.dialogForm.carNumber,attributionUnit:this.dialogForm.attributionUnit,capacity:this.dialogForm.capacity},i=e.carNumber.toUpperCase(),a="carNumber=豫A"+i+"&attributionUnit="+e.attributionUnit+"&capacity="+e.capacity;"新增一条数据"==this.dialogTitle?(console.log("新增"),console.log(a),this.testDialogCarNumber&&this.testDialogAttributionUnit&&this.testDialogCapacity?this.axios.post("/car/addTruck",a).then((function(e){console.log(e),200==e.data.code?(t.$notify({title:"提示",message:"成功添加一条数据！",type:"success"}),t.dialogFormVisible=!1,t.findAll()):400==e.data.code&&t.$notify({title:"提示",message:"该条数据已存在！",type:"warning"})})):(console.log("else"),this.$notify({title:"提示",message:"请检查您输入的内容是否有误！",type:"warning"}))):"编辑"==this.dialogTitle&&(console.log("编辑"),this.testDialogCarNumber&&this.testDialogAttributionUnit&&this.testDialogCapacity?this.oldCarNumber!=i?(a=a+"&id="+this.dialogForm.dialogId,console.log(a),this.axios.post("/car/modifyTruck",a).then((function(e){console.log(e),"修改失败"==e.data.msg?t.$notify({title:"提示",message:"修改失败！",type:"error"}):"修改成功"==e.data.msg?(t.$notify({title:"提示",message:"修改成功！",type:"success"}),t.findAll(),t.dialogFormVisible=!1):"车牌号已存在"==e.data.msg&&t.$notify({title:"提示",message:"该车牌号已存在！",type:"warning"})}))):(e="attributionUnit="+e.attributionUnit+"&capacity="+e.capacity+"&id="+this.dialogForm.dialogId,console.log(e),this.axios.post("/car/modifyTruck",e).then((function(e){console.log(e),"修改失败"==e.data.msg?t.$notify({title:"提示",message:"修改失败！",type:"error"}):"修改成功"==e.data.msg?(t.$notify({title:"提示",message:"修改成功！",type:"success"}),t.findAll(),t.dialogFormVisible=!1):"车牌号已存在"==e.data.msg&&t.$notify({title:"提示！",message:"该车牌号已存在！",type:"warning"})}))):this.$notify({title:"提示",message:"请检查您输入的内容是否有误！",type:"warning"}))},handleSizeChange:function(t){this.pageSize=t,this.findAll()},handleCurrentChange:function(t){this.pageIndex=t,this.findAll()},findAll:function(){var t=this;this.axios.get("/car/getAllTruck?pageSize="+this.pageSize+"&pageIndex="+this.pageIndex).then((function(e){t.tableData=e.data.body.truckList,t.total=e.data.body.total,console.log(e),console.log("刷新页面成功")}))},changeColor:function(t){return t.row,t.column,t.rowIndex,2==t.columnIndex?"color:#409EFF;textAlign:center;cursor: pointer;":"textAlign:center;"},count:function(t){return(this.pageIndex-1)*this.pageSize+t+1}},mounted:function(){this.findAll()}},i(313),i=i(81);(a=Object(i.a)(o,a,[],!1,null,"002efa78",null)).options.__file="src/components/content/operateManagement/TruckManagement.vue",e.default=a.exports}}]);